"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[66],{4613:(e,t,s)=>{s.d(t,{Z:()=>o});var a=s(7294),n=s(6010);class r{static months=["January","February","March","April","May","June","July","August","September","October","November","December"];static monthsAbr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];static getLetterFormatedDate=(e,t)=>{if(!e)return"";if(!Number.isInteger(e))return"";"boolean"!=typeof t&&(t=!1);const s=new Date(1e3*e);return t?s.getDate()+" "+this.monthsAbr[s.getMonth()]+" "+s.getFullYear():s.getDate()+" "+this.months[s.getMonth()]+" "+s.getFullYear()};static getNumberFormatedDate=(e,t,s)=>{if(!e)return"";if(!Number.isInteger(e))return"";t&&"string"==typeof t||(t="-"),"boolean"!=typeof s&&(s=!1);const a=new Date(1e3*e);let n=a.getDate(),r=a.getMonth()+1;return s&&(n=n<10?"0"+n:n,r=r<10?"0"+r:r),n+t+r+t+a.getFullYear()};static getDayOrdinal=e=>{const t=e.toString(),s=t.slice(-1);return"1"===s&&"11"!==t?`${t}st`:"2"===s&&"12"!==t?`${t}nd`:"3"===s&&"13"!==t?`${t}rd`:`${t}th`}}const i={investments:"investments_wo1I",id:"id_x6uA",start:"start_VG4u",end:"end_KOA_",roi:"roi_Tibm",sts:"sts_Xth6",active:"active_GXZY",closed:"closed_yyC2",abtToClose:"abtToClose_GmuB",amt:"amt_yb7x"};function o(e){let{investmentsObj:t}=e;return Object.keys(t).length>0?a.createElement("ul",{className:(0,n.Z)(i.investments,"clean-list")},a.createElement("li",{key:"header"},a.createElement("span",{className:i.start},"Start Date"),a.createElement("span",{className:i.end},"End Date"),a.createElement("span",{className:i.id},"ID"),a.createElement("span",{className:i.sts},"Status"),a.createElement("span",{className:i.amt},"Capital Amt"),a.createElement("span",{className:i.roi},"ROI")),Object.keys(t).map(((e,s)=>{const n=Number(t[e].end)<Math.floor((new Date).getTime()/1e3);return a.createElement("li",{key:e,className:n?i.closed:i.active},a.createElement("span",{className:i.start},r.getLetterFormatedDate(Number(e),!0)),a.createElement("span",{className:i.end},r.getLetterFormatedDate(Number(t[e].end),!0)),a.createElement("span",{className:i.id},e),a.createElement("span",{className:i.sts},n?"Closed":"Active"),a.createElement("span",{className:i.amt},t[e].amt),a.createElement("span",{className:i.roi},t[e].prcntROI+"% every "+t[e].payoutDaysCyc+" days"))}))):a.createElement("div",{className:"text--center"},"No Investments")}},3826:(e,t,s)=>{s.d(t,{Z:()=>w});var a=s(7294),n=s(6010),r=s(2255),i=s(238),o=s(9316);const l="wrap_yJiq",c="isViz_Fkpq",d="bg_p5Qx",m="sheet_hneH",h="xBtn_P64I";class u extends a.Component{constructor(e){super(e),this.state={isVisible:!1}}_openBtmSheet=()=>new Promise((e=>{document&&document.body&&(document.body.style.overflow="hidden"),setTimeout((()=>{this.setState({isVisible:!0}),setTimeout((()=>{e()}),200)}),10)}));close=()=>new Promise((e=>{this.setState({isVisible:!1}),setTimeout((()=>{document&&document.body&&(document.body.style.overflow="visible"),e()}),200)}));closeAndDo=()=>{this.close().then((()=>{this.props.doOnClose&&"function"==typeof this.props.doOnClose&&this.props.doOnClose()}))};componentDidMount(){this._openBtmSheet()}render(){const{title:e,desc:t,useCloseBtn:s,children:r}=this.props;return a.createElement("div",{className:(0,n.Z)(l,this.state.isVisible&&c)},s?a.createElement("div",{className:d}):a.createElement("div",{className:d,onClick:this.closeAndDo}),a.createElement("div",{className:m},(e||t)&&a.createElement("header",null,e&&a.createElement("div",null,e),t&&a.createElement("div",null,t)),a.createElement("main",null,"function"==typeof r?r(this.close):r),s&&a.createElement("span",{className:h,onClick:this.closeAndDo})))}}var g=s(8964),y=s(4613);const E="cstmrList_c3zy",p="nam_t9hV",f="eml_P5ep";class w extends a.Component{constructor(e){super(e),this.state={isWip:!0,isLoadMoreWip:!1,dataAry:[],selectedForViewing:-1,lastEvalKey:null}}fetchDataFromDb=async()=>{let e={};try{let t={TableName:"LunaticCapital_Users",IndexName:"Manager-index",KeyConditionExpression:"#ManagerId = :u",ExpressionAttributeNames:{"#ManagerId":"Mngr"},ExpressionAttributeValues:{":u":this.props.cognitoUser.id},Select:"ALL_PROJECTED_ATTRIBUTES",ScanIndexForward:!1,Limit:10};if(this.state.lastEvalKey&&(t.ExclusiveStartKey=this.state.lastEvalKey),e=await i.Z.queryData(t),e.Count<1)return this.props.notify(this.state.lastEvalKey?"No more customer records":"No customer on record"),this.setState({lastEvalKey:null}),null;null!=this.state.lastEvalKey?this.setState((t=>({dataAry:[...t.dataAry,...e.Items]}))):this.setState({dataAry:e.Items}),e.LastEvaluatedKey?this.setState({lastEvalKey:e.LastEvaluatedKey}):this.setState({lastEvalKey:null})}catch(t){console.log("fetchDataFromDb():",t.message||t.name||t.code||"Error fetching customers"),this.props.notify(t.message||t.name||t.code||"Error fetching customers","err")}};doLoadMore=()=>{this.setState({isLoadMoreWip:!0}),this.fetchDataFromDb().finally((()=>{this.setState({isLoadMoreWip:!1})}))};setSelectedForViewing=e=>{this.setState({selectedForViewing:e})};unsetSelection=()=>{this.setState({selectedForViewing:-1})};componentDidMount(){this.fetchDataFromDb().finally((()=>{this.setState({isWip:!1})}))}render(){return this.state.dataAry.length>0?a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement("ul",{className:(0,n.Z)(E,"clean-list")},a.createElement("li",{key:"header"},a.createElement("div",null,a.createElement("span",{className:p},"Name"),a.createElement("span",{className:f},"Email")),a.createElement("i",null)),this.state.dataAry.map(((e,t)=>a.createElement("li",{key:e.ID,onClick:()=>{this.setSelectedForViewing(t)}},a.createElement("div",null,a.createElement("span",{className:p},e.Dtls.n||"Customer-"+(t+1)),a.createElement("span",{className:f},e.Dtls.eml)),a.createElement(g.Z,{icon:"chevron-right"}))))),this.state.lastEvalKey&&a.createElement(r.pi,null,a.createElement(r.ZP,{variant:"secondary",size:"small",onClick:this.doLoadMore,isWip:this.state.isWip,wipText:"Loading"},"Load more")),this.state.isWip&&0==this.state.dataAry.length&&a.createElement(o.Z,{note:"Loading"})),this.state.selectedForViewing>-1&&a.createElement(u,{title:this.state.dataAry[this.state.selectedForViewing].Dtls.eml,doOnClose:this.unsetSelection,useCloseBtn:!0},a.createElement(y.Z,{investmentsObj:this.state.dataAry[this.state.selectedForViewing].Invst}))):this.state.isWip?a.createElement("div",null,"Loading..."):a.createElement("div",null,"No Customers")}}},238:(e,t,s)=>{s.d(t,{Z:()=>c});var a=s(6036),n=s(3446),r=s(4057),i=s(7167),o=s(934);class l{static creds=null;static lastLoggedInUserEmail=null;static lastReadIdTokenIssuedAt=0;static lastReadIdTokenExpiry=0;static _clear=()=>{this.creds=null,this.lastLoggedInUserEmail=null,this.lastReadIdTokenIssuedAt=0,this.lastReadIdTokenExpiry=0};static _isCredsExpired=()=>{if(!this.creds)return!0;if(!this.creds.expiration)return!0;const e=new Date(this.creds.expiration).getTime();if(isNaN(e))return!0;return Date.now()>=e-15e3};static _getIdToken=async()=>{try{const e=new i.AM({UserPoolId:r.Om,ClientId:r.In});if(!e)throw new Error("Error reading from user pool");const t=e.getCurrentUser(),s=await new Promise(((e,s)=>{t.getSession(((t,a)=>{if(t)return s(t.message||JSON.stringify(t));if(!a)return s("No active user session");if(!a.isValid?.())return s("Invalid session");const n=a.getIdToken?.();return n?e(n):s()}))}));if(!s)throw new Error;return s}catch(e){}};static _getJwtIdToken=async()=>{try{const e=await this._getIdToken(),t=e.getJwtToken?.();if(!t)throw new Error;return t}catch(e){}};static _readIdTokenDetails=async()=>{try{const e=await this._getIdToken(),t=e.decodePayload?.();if(!t)throw new Error;return{email:t.email,issuedAt:e.getIssuedAt?.(),exp:e.getExpiration?.()}}catch(e){}};static _isUserSessionChangedOrExpired=async()=>{try{const{email:t,issuedAt:s,exp:a}=await this._readIdTokenDetails();var e=!1;return this.lastLoggedInUserEmail==t&&this.lastReadIdTokenIssuedAt==s&&this.lastReadIdTokenExpiry==a||(e=!0),this.lastLoggedInUserEmail=t,this.lastReadIdTokenIssuedAt=s,this.lastReadIdTokenExpiry=a,e?(this.creds=null,!0):a<=Math.floor(Date.now()/1e3)-10}catch(t){throw new Error(t)}};static _fetchCredsForLoggedInUser=async e=>{try{const e=await this._getJwtIdToken(),t=(0,o.s)({identityPoolId:r.vX,clientConfig:{region:r.U3},logins:{[`cognito-idp.${r.U3}.amazonaws.com/${r.Om}`]:e}});if(!t)throw new Error("Error getting fn that fetches credentials");const s=await t();return this.creds=s,s}catch(t){throw new Error("Error fetching credentials for logged-in user")}};static isExpired=async()=>!!await this._isUserSessionChangedOrExpired()||!!this._isCredsExpired();static getCredsForLoggedInUser=async()=>{try{if(await this.isExpired()){return{creds:await this._fetchCredsForLoggedInUser(),isFromCache:!1}}return{creds:this.creds,isFromCache:!0}}catch(e){throw new Error("Error getting credentials for logged-in user")}}}class c{static ddbClient=null;static ddbDocClient=null;static close=()=>{this.ddbDocClient&&(this.ddbDocClient.destroy(),this.ddbDocClient=null),this.ddbClient&&(this.ddbClient.destroy(),this.ddbClient=null)};static _initIfNotAlready=async()=>{try{const{creds:e,isFromCache:t}=await l.getCredsForLoggedInUser();return t?(this.ddbClient&&"DynamoDBClient"===this.ddbClient.constructor.name&&this.ddbDocClient||(this.close(),this.ddbClient=new a.c({region:r.U3,credentials:e}),this.ddbDocClient=n.m1.from(this.ddbClient)),this.ddbDocClient):(this.close(),this.ddbClient=new a.c({region:r.U3,credentials:e}),this.ddbDocClient=n.m1.from(this.ddbClient),this.ddbDocClient)}catch(e){console.log("getDynamoDbDocClient():",e.message||e.code||e.name||"Error initiating DB client")}};static queryData=async e=>{try{if(!e)throw new Error("No query specified");await this._initIfNotAlready();return await this.ddbDocClient.send(new n.cI(e))}catch(t){console.log("queryData():",t.message||t.code||t.name||"Error querying data from database")}};static getItemData=async e=>{try{if(!e)throw new Error("No query specified");await this._initIfNotAlready();return await this.ddbDocClient.send(new n.Bj(e))}catch(t){console.log("getItemData():",t.message||t.code||t.name||"Error fetching data from database")}}}},8914:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var a=s(7294),n=s(6550),r=s(2263),i=s(9230),o=s(6787),l=s(1705),c=s(1262);function d(){const[e,t]=a.useState(!0),[d,m]=a.useState(""),{siteConfig:h}=(0,r.Z)(),u=a.useContext(o._1),{notify:g}=a.useContext(l.z);return a.useEffect((()=>{(async()=>{try{const e=await u.getLoggedInCognitoUser();m(e.groups.includes("Manager")?"y":"n"),t(!1)}catch(e){}})()}),[]),u.isLoggedIn?e?a.createElement(a.Fragment,null):"n"==d?a.createElement(n.l_,{to:`${h.baseUrl}console`}):"y"==d&&a.createElement(i.Z,{title:"My Clients",description:"My clients at Lunatic Capital"},a.createElement("main",{className:"container margin-vert--lg"},a.createElement("h1",null,"My Clients"),a.createElement(c.Z,null,(()=>{const e=s(3826).Z;return a.createElement(e,{cognitoUser:u,notify:g})})))):a.createElement(n.l_,{to:`${h.baseUrl}login`})}}}]);