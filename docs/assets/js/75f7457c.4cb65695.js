"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[345],{3171:(e,t,a)=>{a.d(t,{Z:()=>w});var n=a(7294),s=a(6010);class r{static months=["January","February","March","April","May","June","July","August","September","October","November","December"];static monthsAbr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];static getLetterFormatedDate=(e,t)=>{if(!e)return"";if(!Number.isInteger(e))return"";"boolean"!=typeof t&&(t=!1);const a=new Date(1e3*e);return t?a.getDate()+" "+this.monthsAbr[a.getMonth()]+" "+a.getFullYear():a.getDate()+" "+this.months[a.getMonth()]+" "+a.getFullYear()};static getNumberFormatedDate=(e,t,a)=>{if(!e)return"";if(!Number.isInteger(e))return"";t&&"string"==typeof t||(t="-"),"boolean"!=typeof a&&(a=!1);const n=new Date(1e3*e);let s=n.getDate(),r=n.getMonth()+1;return a&&(s=s<10?"0"+s:s,r=r<10?"0"+r:r),s+t+r+t+n.getFullYear()};static getDayOrdinal=e=>{const t=e.toString(),a=t.slice(-1);return"1"===a&&"11"!==t?`${t}st`:"2"===a&&"12"!==t?`${t}nd`:"3"===a&&"13"!==t?`${t}rd`:`${t}th`}}var i=a(2255);const l={tag:"tag_fsVy",small:"small_nozE",g:"g_bCVl",o:"o_GyY6",r:"r_n39y"};function c(e){let{className:t,color:a,children:r,size:i}=e;return n.createElement("span",{className:(0,s.Z)(l.tag,"green"==a&&l.g,"yellow"==a&&l.o,"red"==a&&l.r,"small"==i&&l.small,t&&""!==t&&t)},r)}const o={infoLbl:"infoLbl_HVaW",txtR:"txtR_XmRq",txtC:"txtC_CKU3",cpy:"cpy_yrtj"},d={amt:"amt_OMye",prcnt:"prcnt_YUVf",big:"big_rUzH",short:"short_NwYw",cr:"cr_lfU0",l:"l_M3xS",k:"k_cpDz"};function m(e){let{title:t,children:a,textPos:r,className:i}=e;return n.createElement("div",{className:(0,s.Z)(o.infoLbl,"right"==r&&o.txtR,"center"==r&&o.txtC,i&&""!==i&&i),"data-title":t},a)}function u(e){let{children:t,useShortForm:a,size:r}=e;if(isNaN(t))return n.createElement(n.Fragment,null,"0");const i=Intl.NumberFormat("en-IN").format(t),l=t>=1e7?t/1e7:null,c=t<1e7&&t>=1e5?t/1e5:null,o=t<1e5?t/1e3:null;return n.createElement("span",{className:(0,s.Z)(d.amt,"big"===r&&d.big,l&&d.cr,c&&d.l,o&&d.k,a&&d.short)},a&&(l||c||o)||i)}function h(e){let{children:t,size:a}=e;return n.createElement("span",{className:(0,s.Z)(d.prcnt,"big"===a&&d.big)},t)}const g={infoRow:"infoRow_SY6i",bars:"bars_QNKv",barsRow:"barsRow_dbEh",capitalBars:"capitalBars_Af3B",roiBars:"roiBars_qCM0",payoutMonth:"payoutMonth_sZJ7",currentMonth:"currentMonth_wlT8",gridCol:"gridCol_bqvL"};function E(e){let{startDate:t,endDate:a,payoutFrequencyInDays:i,payoutRoiInPercent:l,capital:c}=e;const o=Math.floor((a-t)/2592e3),d=new Array(o).fill(0),E=Math.floor(i/30),y=Math.floor(l/E),p=y*o,f=Math.floor(p/100),w=f>0?new Array(f).fill(0):[],b=Math.floor(o/6),I=b>1?new Array(b).fill(0):[],N=Math.floor((Math.floor(Date.now()/1e3)-t)/2592e3);return n.createElement("ul",{className:"clean-list"},n.createElement("li",{className:g.infoRow},n.createElement("span",null,n.createElement(m,{title:"Capital"},n.createElement(u,{size:"big"},c))),n.createElement("span",null,n.createElement(m,{title:"Growth",textPos:"right"},n.createElement(h,{size:"big"},y*N)))),n.createElement("li",{className:g.infoRow},n.createElement("ul",{className:(0,s.Z)("clean-list",g.bars)},n.createElement("li",{className:(0,s.Z)(g.barsRow,g.capitalBars)},d.map(((e,t)=>n.createElement("span",{key:t})))),n.createElement("li",{className:(0,s.Z)(g.barsRow,g.roiBars)},d.map(((e,t)=>{const a=N-1==t;return n.createElement("span",{key:t,className:(0,s.Z)(a&&g.currentMonth,Number.isInteger((t+1)/E)&&g.payoutMonth)},a?n.createElement("span",{style:{height:y*(t+1)+"%"},"data-growth":y*(t+1)+"%"}):n.createElement("span",{style:{height:y*(t+1)+"%"}}))}))),w.map(((e,t)=>n.createElement("li",{key:t,className:g.barsRow}))),b>1&&n.createElement("li",{className:g.gridCol},I.map(((e,t)=>n.createElement("span",{key:t})))))),n.createElement("li",{className:g.infoRow},n.createElement("span",null,n.createElement(m,{title:"Invested On"},r.getLetterFormatedDate(Number(t),!0))),n.createElement("span",null,n.createElement(m,{title:"Invested Till",textPos:"right"},r.getLetterFormatedDate(Number(a),!0)))))}const y={dtlC:"dtlC_ZsWX",dtlH:"dtlH_IahU",widget:"widget_FDlw"};function p(e){let{id:t,investmentObj:a,onGoBack:r}=e;const l=Math.round((Number(a.end)-Date.now()/1e3)/86400);return n.createElement("ul",{className:(0,s.Z)("clean-list",y.dtlC)},n.createElement("li",{className:y.dtlH},r&&"function"==typeof r&&n.createElement(i.ZP,{variant:"tertiary",onClick:r,icon:"arrow-left-circle"}),n.createElement(m,{title:"Investment ID"},t),n.createElement(c,{color:l<0?"red":l<=15?"yellow":"green"},l<0?"Ended":l<=15?`Ending in ${l} days`:"Active")),n.createElement("li",{className:y.widget},n.createElement("div",null,n.createElement(E,{startDate:t,endDate:a.end,payoutFrequencyInDays:a.payoutDaysCyc,payoutRoiInPercent:a.prcntROI,capital:a.amt}))))}const f={investments:"investments_wo1I",id:"id_x6uA",start:"start_VG4u",end:"end_KOA_",roi:"roi_Tibm",sts:"sts_Xth6",active:"active_GXZY",closed:"closed_yyC2",amt:"amt_yb7x",act:"act_vqFX"};function w(e){let{investmentsObj:t}=e;const[a,l]=(0,n.useState)(null);return null!=a?n.createElement(p,{id:a,onGoBack:()=>{l(null)},investmentObj:t[a]}):Object.keys(t).length>0?n.createElement("ul",{className:(0,s.Z)(f.investments,"clean-list")},n.createElement("li",{key:"header"},n.createElement("span",{className:f.start},"Start Date"),n.createElement("span",{className:f.end},"End Date"),n.createElement("span",{className:f.id},"ID"),n.createElement("span",{className:f.sts},"Status"),n.createElement("span",{className:f.amt},"Capital Amt"),n.createElement("span",{className:f.roi},"ROI"),n.createElement("span",{className:f.act},"Actions")),Object.keys(t).map(((e,a)=>{const s=Math.round((Number(t[e].end)-Date.now()/1e3)/86400);return n.createElement("li",{key:e,className:s<0?f.closed:f.active},n.createElement("span",{className:f.start},r.getLetterFormatedDate(Number(e),!0)),n.createElement("span",{className:f.end},r.getLetterFormatedDate(Number(t[e].end),!0)),n.createElement("span",{className:f.id},e),n.createElement("span",{className:f.sts},n.createElement(c,{color:s<0?"red":s<=15?"yellow":"green"},s<0?"Ended":s<=15?`Ending in ${s} days`:"Active")),n.createElement("span",{className:f.amt},t[e].amt),n.createElement("span",{className:f.roi},t[e].prcntROI+"% every "+t[e].payoutDaysCyc+" days"),n.createElement("div",{className:f.act},n.createElement(i.ZP,{variant:"tertiary",size:"smaller",onClick:()=>{l(e)},icon:"arrow-right",isIconOnRight:!0},"View")))}))):n.createElement("div",{className:"text--center"},"No Investments")}},5578:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(7294),s=(a(2255),a(238)),r=a(9316),i=a(3171);class l extends n.Component{constructor(e){super(e),this.state={isWip:!0,investments:{}}}fetchDataFromDb=async()=>{try{let e={TableName:"LunaticCapital_Users",Key:{ID:this.props.cognitoUser.id},ProjectionExpression:"Invst"};const t=await s.Z.getItemData(e);if(!t||t=={}||null==t.Item)throw new Error("No investments on record");return this.setState({investments:t.Item.Invst}),t.Item.Invst}catch(e){this.props.notify(e.message||e.name||e.code||"Error fetching investments","err")}};componentDidMount(){this.fetchDataFromDb().finally((()=>{this.setState({isWip:!1})}))}render(){return Object.keys(this.state.investments).length>0?n.createElement("div",null,n.createElement(i.Z,{investmentsObj:this.state.investments}),this.state.isWip&&0==Object.keys(this.state.investments).length&&n.createElement(r.Z,{note:"Loading"})):this.state.isWip?n.createElement("div",null,"Loading..."):n.createElement("div",null,"No records")}}},238:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(6036),s=a(3446),r=a(4057),i=a(7167),l=a(934);class c{static creds=null;static lastLoggedInUserEmail=null;static lastReadIdTokenIssuedAt=0;static lastReadIdTokenExpiry=0;static _clear=()=>{this.creds=null,this.lastLoggedInUserEmail=null,this.lastReadIdTokenIssuedAt=0,this.lastReadIdTokenExpiry=0};static _isCredsExpired=()=>{if(!this.creds)return!0;if(!this.creds.expiration)return!0;const e=new Date(this.creds.expiration).getTime();if(isNaN(e))return!0;return Date.now()>=e-15e3};static _getIdToken=async()=>{try{const e=new i.AM({UserPoolId:r.Om,ClientId:r.In});if(!e)throw new Error("Error reading from user pool");const t=e.getCurrentUser(),a=await new Promise(((e,a)=>{t.getSession(((t,n)=>{if(t)return a(t.message||JSON.stringify(t));if(!n)return a("No active user session");if(!n.isValid?.())return a("Invalid session");const s=n.getIdToken?.();return s?e(s):a()}))}));if(!a)throw new Error;return a}catch(e){}};static _getJwtIdToken=async()=>{try{const e=await this._getIdToken(),t=e.getJwtToken?.();if(!t)throw new Error;return t}catch(e){}};static _readIdTokenDetails=async()=>{try{const e=await this._getIdToken(),t=e.decodePayload?.();if(!t)throw new Error;return{email:t.email,issuedAt:e.getIssuedAt?.(),exp:e.getExpiration?.()}}catch(e){}};static _isUserSessionChangedOrExpired=async()=>{try{const{email:t,issuedAt:a,exp:n}=await this._readIdTokenDetails();var e=!1;return this.lastLoggedInUserEmail==t&&this.lastReadIdTokenIssuedAt==a&&this.lastReadIdTokenExpiry==n||(e=!0),this.lastLoggedInUserEmail=t,this.lastReadIdTokenIssuedAt=a,this.lastReadIdTokenExpiry=n,e?(this.creds=null,!0):n<=Math.floor(Date.now()/1e3)-10}catch(t){throw new Error(t)}};static _fetchCredsForLoggedInUser=async e=>{try{const e=await this._getJwtIdToken(),t=(0,l.s)({identityPoolId:r.vX,clientConfig:{region:r.U3},logins:{[`cognito-idp.${r.U3}.amazonaws.com/${r.Om}`]:e}});if(!t)throw new Error("Error getting fn that fetches credentials");const a=await t();return this.creds=a,a}catch(t){throw new Error("Error fetching credentials for logged-in user")}};static isExpired=async()=>!!await this._isUserSessionChangedOrExpired()||!!this._isCredsExpired();static getCredsForLoggedInUser=async()=>{try{if(await this.isExpired()){return{creds:await this._fetchCredsForLoggedInUser(),isFromCache:!1}}return{creds:this.creds,isFromCache:!0}}catch(e){throw new Error("Error getting credentials for logged-in user")}}}class o{static ddbClient=null;static ddbDocClient=null;static close=()=>{this.ddbDocClient&&(this.ddbDocClient.destroy(),this.ddbDocClient=null),this.ddbClient&&(this.ddbClient.destroy(),this.ddbClient=null)};static _initIfNotAlready=async()=>{try{const{creds:e,isFromCache:t}=await c.getCredsForLoggedInUser();return t?(this.ddbClient&&"DynamoDBClient"===this.ddbClient.constructor.name&&this.ddbDocClient||(this.close(),this.ddbClient=new n.c({region:r.U3,credentials:e}),this.ddbDocClient=s.m1.from(this.ddbClient)),this.ddbDocClient):(this.close(),this.ddbClient=new n.c({region:r.U3,credentials:e}),this.ddbDocClient=s.m1.from(this.ddbClient),this.ddbDocClient)}catch(e){console.log("getDynamoDbDocClient():",e.message||e.code||e.name||"Error initiating DB client")}};static queryData=async e=>{try{if(!e)throw new Error("No query specified");await this._initIfNotAlready();return await this.ddbDocClient.send(new s.cI(e))}catch(t){console.log("queryData():",t.message||t.code||t.name||"Error querying data from database")}};static getItemData=async e=>{try{if(!e)throw new Error("No query specified");await this._initIfNotAlready();return await this.ddbDocClient.send(new s.Bj(e))}catch(t){console.log("getItemData():",t.message||t.code||t.name||"Error fetching data from database")}}}},5574:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var n=a(7294),s=a(6550),r=a(2263),i=a(9230),l=a(6787),c=a(1705),o=a(1262);function d(){const{siteConfig:e}=(0,r.Z)(),t=n.useContext(l._1),{notify:d}=n.useContext(c.z);return t.isLoggedIn?n.createElement(i.Z,{title:`Investments at ${e.title}`,description:"My investments at Lunatic Capital"},n.createElement("main",{className:"container margin-vert--lg"},n.createElement("h1",null,"My Investments"),n.createElement(o.Z,null,(()=>{const e=a(5578).Z;return n.createElement(e,{cognitoUser:t,notify:d})})))):n.createElement(s.l_,{to:`${e.baseUrl}login`})}}}]);