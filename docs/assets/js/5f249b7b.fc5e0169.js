"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[428],{238:(e,t,r)=>{r.d(t,{Z:()=>c});var n=r(6036),a=r(1872),l=r(4057),i=r(7167),s=r(934);class o{static creds=null;static lastLoggedInUserEmail=null;static lastReadIdTokenIssuedAt=0;static lastReadIdTokenExpiry=0;static _clear=()=>{this.creds=null,this.lastLoggedInUserEmail=null,this.lastReadIdTokenIssuedAt=0,this.lastReadIdTokenExpiry=0};static _isCredsExpired=()=>{if(!this.creds)return!0;if(!this.creds.expiration)return!0;const e=new Date(this.creds.expiration).getTime();if(isNaN(e))return!0;return Date.now()>=e-15e3};static _getIdToken=async()=>{try{const e=new i.AM({UserPoolId:l.Om,ClientId:l.In});if(!e)throw new Error("Error reading from user pool");const t=e.getCurrentUser(),r=await new Promise(((e,r)=>{t.getSession(((t,n)=>{if(t)return r(t.message||JSON.stringify(t));if(!n)return r("No active user session");if(!n.isValid?.())return r("Invalid session");const a=n.getIdToken?.();return a?e(a):r()}))}));if(!r)throw new Error;return r}catch(e){}};static _getJwtIdToken=async()=>{try{const e=await this._getIdToken(),t=e.getJwtToken?.();if(!t)throw new Error;return t}catch(e){}};static _readIdTokenDetails=async()=>{try{const e=await this._getIdToken(),t=e.decodePayload?.();if(!t)throw new Error;return{email:t.email,issuedAt:e.getIssuedAt?.(),exp:e.getExpiration?.()}}catch(e){}};static _isUserSessionChangedOrExpired=async()=>{try{const{email:t,issuedAt:r,exp:n}=await this._readIdTokenDetails();var e=!1;return this.lastLoggedInUserEmail==t&&this.lastReadIdTokenIssuedAt==r&&this.lastReadIdTokenExpiry==n||(e=!0),this.lastLoggedInUserEmail=t,this.lastReadIdTokenIssuedAt=r,this.lastReadIdTokenExpiry=n,e?(this.creds=null,!0):n<=Math.floor(Date.now()/1e3)-10}catch(t){throw new Error(t)}};static _fetchCredsForLoggedInUser=async e=>{try{const e=await this._getJwtIdToken(),t=(0,s.s)({identityPoolId:l.vX,clientConfig:{region:l.U3},logins:{[`cognito-idp.${l.U3}.amazonaws.com/${l.Om}`]:e}});if(!t)throw new Error("Error getting fn that fetches credentials");const r=await t();return this.creds=r,r}catch(t){throw new Error("Error fetching credentials for logged-in user")}};static isExpired=async()=>!!await this._isUserSessionChangedOrExpired()||!!this._isCredsExpired();static getCredsForLoggedInUser=async()=>{try{if(await this.isExpired()){return{creds:await this._fetchCredsForLoggedInUser(),isFromCache:!1}}return{creds:this.creds,isFromCache:!0}}catch(e){throw new Error("Error getting credentials for logged-in user")}}}class c{static ddbClient=null;static ddbDocClient=null;static close=()=>{this.ddbDocClient&&(this.ddbDocClient.destroy(),this.ddbDocClient=null),this.ddbClient&&(this.ddbClient.destroy(),this.ddbClient=null)};static _initIfNotAlready=async()=>{try{const{creds:e,isFromCache:t}=await o.getCredsForLoggedInUser();return t?(this.ddbClient&&"DynamoDBClient"===this.ddbClient.constructor.name&&this.ddbDocClient||(this.close(),this.ddbClient=new n.c({region:l.U3,credentials:e}),this.ddbDocClient=a.m1.from(this.ddbClient)),this.ddbDocClient):(this.close(),this.ddbClient=new n.c({region:l.U3,credentials:e}),this.ddbDocClient=a.m1.from(this.ddbClient),this.ddbDocClient)}catch(e){console.log("getDynamoDbDocClient():",e.message||e.code||e.name||"Error initiating DB client")}};static queryData=async e=>{try{if(!e)throw new Error("No query specified");await this._initIfNotAlready();return await this.ddbDocClient.send(new a.cI(e))}catch(t){console.log("queryData():",t.message||t.code||t.name||"Error querying data from database")}};static getItemData=async e=>{try{if(!e)throw new Error("No query specified");await this._initIfNotAlready();return await this.ddbDocClient.send(new a.Bj(e))}catch(t){console.log("getItemData():",t.message||t.code||t.name||"Error fetching data from database")}};static putData=async e=>{try{if(!e)throw new Error("No query specified");await this._initIfNotAlready();return await this.ddbDocClient.send(new a.Yi(e))}catch(t){console.log("putData():",t.message||t.code||t.name||"Error writing to database")}}}},876:(e,t,r)=>{r.d(t,{Z:()=>E});var n=r(7294),a=r(6010),l=r(2255),i=r(6518),s=r(4534);const o={radioBtnList:"radioBtnList_AV6k"};function c(e){let{className:t,children:r,checkedIdx:l,onChk:i}=e;return n.createElement("ul",{className:(0,a.Z)(o.radioBtnList,"clean-list",t&&""!==t.trim()&&t)},r.map(((e,t)=>n.createElement("li",{key:"radioChk"+t},n.createElement(s.Z,{isChecked:l==t,onToggle:()=>{i(t)}},e)))))}var d=r(238),m=r(9316),u=r(1705);const h={footr:"footr_ZMK3",dataUl:"dataUl_DiL2"};function E(){const[e,t]=n.useState(!1),[r,a]=n.useState(1),[i,s]=n.useState(""),[o,c]=n.useState(""),[E,p]=n.useState(""),[y,I]=n.useState(""),[b,_]=n.useState(""),[x,k]=n.useState(""),[D,S]=n.useState(""),[L,M]=n.useState(""),[N,R]=n.useState(""),[Z,U]=n.useState(""),[T,F]=n.useState(!1),[P,X]=n.useState(0),[A,B]=n.useState(""),[O,z]=n.useState(""),[q,V]=n.useState(""),[H,$]=n.useState(""),[W,J]=n.useState(""),[j,K]=n.useState(""),[Y,G]=n.useState(""),[Q,ee]=n.useState(""),{notify:te}=n.useContext(u.z),re=(e,t)=>!t||e&&""!=e.trim()?t&&e.trim().length<3?"Minimum 3 letters":e.trim().length>40?"Is too long":/[^a-zA-Z ]/.test(e)?"Only alphabets allowed":/^(?:[^\d\W\s_]{3,20})(?:[\s]{1}(?:[^\d\W\s_]{2,20})){0,1}$/.test(e)?null:"Req Format: Firstname Lastname":"Required",ne=e=>e.length>60?"Is too long":""===e.trim()||/^[\w.@]+@+[\w.]+$/.test(e)?null:"Enter valid email",ae=(e,t)=>!t||e&&""!=e.trim()?e.length>0&&!/^[0-9]{10}$/.test(e)?"Enter valid 10 digit number":e.length>0&&10!==e.trim().length?"Should be 10 digits long":null:"Phone required",le=(e,t)=>!t||e&&""!=e.trim()?e.length>100?"Is too long":/[^a-zA-Z0-9,!. ]/.test(e)?"Invalid character":null:"Required";return n.createElement(n.Fragment,null,n.createElement("div",null,1==r&&n.createElement(g,{name:i,setName:e=>{var t=re(e,!0);c(t||""),s(e)},nameErr:o,phn:E,setPhn:e=>{var t=ae(e,!0);I(t||""),p(e)},phnErr:y}),2==r&&n.createElement(f,{email:b,setEmail:e=>{var t=ne(e);k(t||""),_(e)},emailErr:x,loc:D,setLoc:e=>{var t=le(e,!1);M(t||""),S(e)},locErr:L}),3==r&&n.createElement(v,{vehReg:N,setVehReg:e=>{var t=le(e,!0);U(t||""),R(e)},vehRegErr:Z,isOwned:T,setIsOwned:F,cabServiceChoice:P,setCabServiceChoice:X}),4==r&&n.createElement(w,{ref1name:A,setRef1name:e=>{var t=re(e,""!==q.toString().trim());z(t||""),B(e)},ref1nameErr:O,ref1phn:q,setRef1phn:e=>{var t=ae(e,!1);$(t||""),V(e)},ref1phnErr:H,ref2name:W,setRef2name:e=>{var t=re(e,""!==Y.toString().trim());K(t||""),J(e)},ref2nameErr:j,ref2phn:Y,setRef2phn:e=>{var t=ae(e,!1);ee(t||""),G(e)},ref2phnErr:Q}),5==r&&n.createElement(C,{name:i})),n.createElement("footer",{className:h.footr},n.createElement(l.pi,null,5==r?n.createElement(l.ZP,{variant:"secondary",size:"small",onClick:()=>{s(""),c(""),p(""),I(""),_(""),k(""),S(""),M(""),R(""),U(""),F(!1),X(0),B(""),z(""),V(""),$(""),J(""),K(""),G(""),ee(""),a(1),t(!1)},icon:"arrow-right",isIconOnRight:!0},"Continue to enroll another"):n.createElement(n.Fragment,null,n.createElement(l.ZP,{variant:"primary",size:"small",onClick:async()=>{if(r>=5)return!1;switch(r){case 1:var e=re(i),n=ae(E);if(null!=e||null!=n)return e&&c(e),n&&I(n),te("Pleae provide required details","err"),!1;a(2);break;case 2:var l=ne(b),s=le(D,!1);if(null!=l||null!=s)return l&&k(l),s&&M(s),te("Pleae provide required details","err"),!1;a(3);break;case 3:var o=le(N,!0);if(null!=o)return o&&U(o),te("Pleae provide vehicle reg","err"),!1;a(4);break;case 4:var m=ae(q,!1),u=null;""!==q.toString().trim()&&(u=re(A,!0));var h=ae(Y,!1),g=null;if(""!==q.toString().trim()&&(g=re(W,!0)),null!=u||null!=m||null!=g||null!=h)return u&&z(u),m&&$(m),g&&K(g),h&&$(h),te("Pleae provide name when providing phone number","err"),!1;var f={phn:Number(E),ts:Math.floor((new Date).getTime()/1e3),name:i,veh:N,owned:T,cab:P};""!==b.trim()&&(f.eml=b),""!==D.trim()&&(f.loc=D);try{t(!0);if(!await d.Z.putData({TableName:"LunaticCapital_RikshawDrivers",Item:f}))throw new Error;a(5)}catch(v){te(v.message||v.name||v.code||"Failed to Enroll, Please retry","err"),t(!1)}finally{t(!1)}break;default:te("Unknown action","alert")}},icon:"arrow-right",isIconOnRight:!0},1==r?"ENROLL":4==r?"SUBMIT":"PROCEED"),r>1&&n.createElement(l.ZP,{variant:"secondary",type:"button",size:"small",onClick:()=>{r>1&&a(r-1)},icon:"arrow-left"})))),e&&n.createElement(m.Z,{note:"Saving"}))}function g(e){let{name:t,setName:r,nameErr:l,phn:s,setPhn:o,phnErr:c}=e;return n.createElement("ul",{className:(0,a.Z)(h.dataUl,"clean-list")},n.createElement("li",null,n.createElement("h3",null,"Welcome!"))," ",n.createElement("li",null,n.createElement(i.Z,{title:"Name",placeholder:"Name",onChange:e=>{r(e.target.value)},value:t,error:l,icon:"user",initFocused:!0})),n.createElement("li",null,n.createElement(i.Z,{title:"Phone",placeholder:"Phone",onChange:e=>{o(e.target.value)},value:s,error:c,type:"number"})))}function f(e){let{email:t,setEmail:r,emailErr:l,loc:s,setLoc:o,locErr:c}=e;return n.createElement("ul",{className:(0,a.Z)(h.dataUl,"clean-list")},n.createElement("li",null,n.createElement("h3",null,"More about you!")),n.createElement("li",null,n.createElement(i.Z,{title:"Email",placeholder:"Email",onChange:e=>{r(e.target.value)},value:t,error:l})),n.createElement("li",null,n.createElement(i.Z,{title:"Locality",placeholder:"Locality",onChange:e=>{o(e.target.value)},value:s,error:c})))}function v(e){let{vehReg:t,setVehReg:r,vehRegErr:l,isOwned:o,setIsOwned:d,cabServiceChoice:m,setCabServiceChoice:u}=e;return n.createElement("ul",{className:(0,a.Z)(h.dataUl,"clean-list")},n.createElement("li",null,n.createElement("h3",null,"Vehicle Info")),n.createElement("li",null,n.createElement(i.Z,{title:"Vehicle lic-plate number",placeholder:"Vehicle lic-plate number",onChange:e=>{r(e.target.value)},value:t,error:l,initFocused:!0})),n.createElement("li",null,n.createElement(s.Z,{isChecked:o,onToggle:()=>{d(!o)}},"I own the vehicle")),n.createElement("li",null,n.createElement("h3",null,"Cab Service")),n.createElement("li",null,n.createElement(c,{checkedIdx:m,onChk:u},n.createElement(n.Fragment,null,"None"),n.createElement(n.Fragment,null,"Ola"),n.createElement(n.Fragment,null,"Uber"))))}function w(e){let{ref1name:t,setRef1name:r,ref1nameErr:l,ref1phn:s,setRef1phn:o,ref1phnErr:c,ref2name:d,setRef2name:m,ref2nameErr:u,ref2phn:E,setRef2phn:g,ref2phnErr:f}=e;return n.createElement("ul",{className:(0,a.Z)(h.dataUl,"clean-list")},n.createElement("li",null,n.createElement("h3",null,"Referral Person 1")),n.createElement("li",null,n.createElement(i.Z,{title:"Name",placeholder:"Name",onChange:e=>{r(e.target.value)},value:t,error:l,icon:"user",initFocused:!0})),n.createElement("li",null,n.createElement(i.Z,{title:"Phone",placeholder:"Phone",onChange:e=>{o(e.target.value)},value:s,error:c,type:"number"})),n.createElement("li",null,n.createElement("h3",null,"Referral Person 2")),n.createElement("li",null,n.createElement(i.Z,{title:"Name",placeholder:"Name",onChange:e=>{m(e.target.value)},value:d,error:u,icon:"user"})),n.createElement("li",null,n.createElement(i.Z,{title:"Phone",placeholder:"Phone",onChange:e=>{g(e.target.value)},value:E,error:f,type:"number"})))}function C(e){let{name:t}=e;return n.createElement("ul",{className:(0,a.Z)(h.dataUl,"clean-list")},n.createElement("li",null,n.createElement("h3",null,"Successfully Enrolled ",n.createElement("b",null,t),"!")))}},756:(e,t,r)=>{r.r(t),r.d(t,{default:()=>h});var n=r(7294),a=r(6550),l=r(2263),i=r(7462);function s(e){return n.createElement("svg",(0,i.Z)({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 640 640",enableBackground:"new 0 0 640 640",xmlSpace:"preserve"},e),n.createElement("symbol",{id:"sideLight",viewBox:"-24 -12 48 24"},n.createElement("path",{id:"XMLID_23_",fill:"#F15A24",d:"M16-12h-32c-4.4,0-8,3.6-8,8v8c0,4.4,3.6,8,8,8h32c4.4,0,8-3.6,8-8v-8C24-8.4,20.4-12,16-12 z"})),n.createElement("symbol",{id:"rikFrontVuTyreSvg",viewBox:"-24 -60 48 120"},n.createElement("path",{id:"XMLID_17_",d:"M8.7-60H-8.7C-17.1-60-24-53.1-24-44.7v89.3C-24,53.1-17.1,60-8.7,60H8.7C17.1,60,24,53.1,24,44.7v-89.3 C24-53.1,17.1-60,8.7-60z"})),n.createElement("symbol",{id:"tyreCover",viewBox:"-40 -36 80 72"},n.createElement("path",{id:"XMLID_19_",fill:"#1A1A1A",d:"M24.7-36h-49.3C-33.1-36-40-29.1-40-20.7v41.3c0,8.5,6.9,15.3,15.3,15.3h49.3 C33.1,36,40,29.1,40,20.7v-41.3C40-29.1,33.1-36,24.7-36z"})),n.createElement("use",{xlinkHref:"#tyreCover",width:"80",height:"72",id:"XMLID_7_",x:"-40",y:"-36",transform:"matrix(4 0 0 -4 320 248)",overflow:"visible"}),n.createElement("use",{xlinkHref:"#rikFrontVuTyreSvg",width:"48",height:"120",id:"XMLID_11_",x:"-24",y:"-60",transform:"matrix(1 0 0 -1 184 500)",overflow:"visible"}),n.createElement("use",{xlinkHref:"#tyreCover",width:"80",height:"72",id:"XMLID_10_",x:"-40",y:"-36",transform:"matrix(1 0 0 -1 184 460)",overflow:"visible"}),n.createElement("use",{xlinkHref:"#rikFrontVuTyreSvg",width:"48",height:"120",id:"XMLID_21_",x:"-24",y:"-60",transform:"matrix(1 0 0 -1 456 500)",overflow:"visible"}),n.createElement("use",{xlinkHref:"#tyreCover",width:"80",height:"72",id:"XMLID_20_",x:"-40",y:"-36",transform:"matrix(1 0 0 -1 456 460)",overflow:"visible"}),n.createElement("path",{id:"XMLID_14_",fill:"#333333",d:"M328,520.1c0,0-83.1,0-126,0s-42-200.2-42-200.2h168V520.1z"}),n.createElement("path",{id:"XMLID_28_",fill:"#333333",d:"M312,520.1c0,0,83.1,0,126,0s42-200.2,42-200.2H312V520.1z"}),n.createElement("use",{xlinkHref:"#rikFrontVuTyreSvg",width:"48",height:"120",id:"XMLID_15_",x:"-24",y:"-60",transform:"matrix(1 0 0 -1 320 508)",overflow:"visible"}),n.createElement("use",{xlinkHref:"#tyreCover",width:"80",height:"72",id:"XMLID_6_",x:"-40",y:"-36",transform:"matrix(1 0 0 -1 320 468)",overflow:"visible"}),n.createElement("circle",{id:"XMLID_9_",fill:"#CCCCCC",cx:"320",cy:"424",r:"24"}),n.createElement("use",{xlinkHref:"#sideLight",width:"48",height:"24",id:"XMLID_4_",x:"-24",y:"-12",transform:"matrix(1 0 0 -1 176 340)",overflow:"visible"}),n.createElement("use",{xlinkHref:"#sideLight",width:"48",height:"24",id:"XMLID_12_",x:"-24",y:"-12",transform:"matrix(1 0 0 -1 464 340)",overflow:"visible"}),n.createElement("polygon",{id:"XMLID_5_",opacity:"0.5",fill:"#7FCDEE",points:"472,296 168,296 176,200 200,144 440,144 464,200 \t"}),n.createElement("line",{id:"XMLID_16_",fill:"none",stroke:"#000000",strokeWidth:"4",strokeMiterlimit:"10",x1:"240",y1:"144",x2:"240",y2:"280"}),n.createElement("line",{id:"XMLID_27_",fill:"none",stroke:"#000000",strokeWidth:"4",strokeMiterlimit:"10",x1:"400",y1:"144",x2:"400",y2:"280"}),n.createElement("path",{id:"XMLID_25_",fill:"#FBB03B",d:"M429.5,136c-41.1,0-176.8,0-218.9,0S160,241,160,320.3c58.9,0,274.8,0,320.1,0 C480,242,470.5,136,429.5,136z M222.1,148.8c37.7,0,159.1,0,195.8,0c36.7,0,45.2,75.5,45.2,131.3c-40.5,0-233.5,0-286.2,0 C176.9,223.6,184.4,148.8,222.1,148.8z"}))}const o={topC:"topC_Dqjt",btmC:"btmC_IJj0",topEdgeSvg:"topEdgeSvg_XdvR"};var c=r(6526);function d(e){let{children:t,topContainerChildren:r}=e;return n.createElement(n.Fragment,null,n.createElement("div",{className:o.topC},"function"==typeof r&&r()),n.createElement("div",{className:o.btmC},n.createElement(c.AW,{className:o.topEdgeSvg}),t))}var m=r(6787),u=r(1262);function h(){const[e,t]=n.useState(!0),[i,o]=n.useState(""),{siteConfig:c}=(0,l.Z)(),h=n.useContext(m._1);return n.useEffect((()=>{(async()=>{try{const e=await h.getLoggedInCognitoUser();o(e.groups.includes("Manager")?"y":"n"),t(!1)}catch(e){}})()}),[]),h.isLoggedIn?e?n.createElement("main",null,"Loading..."):"y"==i?n.createElement(d,{topContainerChildren:()=>n.createElement("div",null,n.createElement(s,null))},n.createElement(u.Z,null,(()=>{const e=r(876).Z;return n.createElement(e,null)}))):n.createElement(a.l_,{to:`${c.baseUrl}`}):n.createElement(a.l_,{to:`${c.baseUrl}login`})}}}]);